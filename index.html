<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Souqmarine</title>

  <!-- Pi SDK -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>

  <h1>Souqmarine</h1>
  <p>Maritime market · Powered by Pi Network</p>

  <button onclick="pay()">Test Pi Payment</button>

  <script>
    Pi.init({ version: "2.0", sandbox: true });

    function pay() {
      Pi.createPayment(
        {
          amount: 0.01,
          memo: "Souqmarine Testnet Verification"
        },
        {
          onReadyForServerApproval(paymentId) {
            fetch("/api/approve", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ paymentId })
            });
          },

          onComplete(paymentId, txid) {
            fetch("/api/complete", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ paymentId, txid })
            });
            alert("Payment successful ✔️");
          },

          onCancel() {
            alert("Payment cancelled");
          },

          onError(error) {
            alert("Payment error");
            console.error(error);
          }
        }
      );
    }
  </script>

</body>
</html>
